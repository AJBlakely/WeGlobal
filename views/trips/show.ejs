<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= trip.destination %> Details</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <div class="container">
        <div class="header-image-container"></div>

        <h1><%= trip.destination %></h1>

        <p class="date-range">
            <strong>Dates:</strong>
            <%= trip.startDate ? trip.startDate.toDateString() : 'N/A' %>
            to
            <%= trip.endDate ? trip.endDate.toDateString() : 'N/A' %>
        </p>
    <div>
        <h3>Accommodations</h3>
        <ul>
            <% trip.accommodation.forEach(place => { %>
                <% if (place && place.trim() !== "") { %> 
                    <li><%= place %></li> 
                    <% } %>
            <% }) %>
        </ul>

        <h3>Activities:</h3>
        <% [1, 2, 3, 4, 5].forEach(num => { %>
            <% 
       const event = trip['event' + num]; 
       if (event && event.activity) { 
            %>
            <div class="event-slot">
                <strong><%= event.time %></strong> - <%= event.activity %>
                <% if (event.link) { %>
                    | <a href="<%= event.link %>" target="_blank">Link</a>
                <% } %>
            </div>
            <% } %>
        <% }) %>

        <h3>Helpful Tips</h3>
        <p><%= trip.tips %></p>
        </div>
        

        <div style="margin-top: 40px; display: flex; gap: 15px; align-items: center;">
            <a href="/users/<%= user._id %>/trips/<%= trip._id %>/edit" class="btn-edit">Edit Trip Details</a>

            <form action="/users/<%= user._id %>/trips/<%= trip._id %>?_method=DELETE" method="POST">
                <button type="submit" class="btn-delete">Delete Destination</button>
            </form>
        </div>

    </div>
</body>
</html>